module.exports=[94440,a=>{"use strict";var b=a.i(13691),c=a.i(15916),d=a.i(59922),e=a.i(87637),f=a.i(9309),g=a.i(30194),h=a.i(48848),i=a.i(29513),j=a.i(4750),k=a.i(86288);a.i(42680);var l=a.i(19556),m=a.i(45243),n=a.i(7298),o=a.i(22942),p=a.i(937),q=a.i(84982),r=a.i(94),s=a.i(17336),t=a.i(68609),u=a.i(10083),v=a.i(20470),w=a.i(92861),x=a.i(38382),y=a.i(97295);function z(a,b,c){let d=(0,y.toDate)(a,c?.in);return isNaN(b)?(0,x.constructFrom)(c?.in||a,NaN):(b&&d.setDate(d.getDate()+b),d)}var A=a.i(51411),B=a.i(10243),C=a.i(19717);function D({open:a,onOpenChange:g,service:h}){let{fetchAvailability:i,createBooking:j,isLoading:x,error:y,clearError:D,availability:E}=(0,l.useBookings)(),{balance:F,fetchBalance:G}=(0,m.useCredits)(),{isAuthenticated:H}=(0,n.useAuthContext)(),I=(0,d.useRouter)(),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)("ONLINE"),[P,Q]=(0,c.useState)("STRIPE"),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)([]),[V,W]=(0,c.useState)(!1);(0,c.useEffect)(()=>{a&&h&&(K(null),M(null),O("ONLINE"),Q("STRIPE"),U([]),D(),H&&G())},[a,h,D,H,G]),(0,c.useEffect)(()=>{if(J&&h){W(!0);let a=(0,w.format)(J,"yyyy-MM-dd");i(h.id,a)}else U([]),W(!1)},[J,h,i]),(0,c.useEffect)(()=>{if(E&&J){let a=(0,w.format)(J,"yyyy-MM-dd");E.date===a&&(U(E.slots||[]),W(!1))}},[E,J]);let X=async()=>{if(h&&J&&L){if(!H){C.toast.error("Please sign in to book a session"),g(!1),I.push("/login?redirect=/bookings");return}S(!0);try{let[a,b]=L.split(":").map(Number),c=new Date(J);c.setHours(a,b,0,0),await j({serviceId:h.id,startDateTime:c.toISOString(),type:N,paymentMethod:P})&&(C.toast.success("Booking created successfully!"),"CREDITS"===P&&await G(),g(!1))}catch(a){C.toast.error("Failed to create booking. Please try again.")}finally{S(!1)}}},Y=(()=>{let a=[],b=new Date,c=(0,A.startOfWeek)(b,{weekStartsOn:1});for(let d=0;d<4;d++)for(let e=0;e<7;e++){let f=z(z(c,7*d,void 0),e);f>=b&&a.push(f)}return a.slice(0,28)})();return h?(0,b.jsx)(k.Dialog,{open:a,onOpenChange:g,children:(0,b.jsxs)(k.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsxs)(k.DialogTitle,{className:"text-2xl font-bold",children:["Book ",h.name]}),(0,b.jsx)(k.DialogDescription,{children:"Select a date and time for your appointment"})]}),y&&(0,b.jsx)("div",{className:"p-3 rounded-md bg-destructive/10 border border-destructive/20 text-destructive text-sm",children:y}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(f.Card,{className:"border-primary/20",children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-foreground",children:h.name}),h.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:h.description})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"text-2xl font-bold text-primary",children:["£",h.price]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[h.duration," minutes"]})]})]})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-foreground mb-3",children:"Appointment Type"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)(e.Button,{type:"button",variant:"ONLINE"===N?"default":"outline",onClick:()=>{O("ONLINE"),M(null)},className:"h-auto py-4 flex flex-col items-center gap-2",children:[(0,b.jsx)(q.Video,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"Online"})]}),(0,b.jsxs)(e.Button,{type:"button",variant:"IN_PERSON"===N?"default":"outline",onClick:()=>{O("IN_PERSON"),M(null)},className:"h-auto py-4 flex flex-col items-center gap-2",children:[(0,b.jsx)(r.MapPin,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"In-Person"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"text-sm font-medium text-foreground mb-3 flex items-center gap-2",children:[(0,b.jsx)(o.Calendar,{className:"h-4 w-4"}),"Select Date"]}),(0,b.jsx)("div",{className:"grid grid-cols-7 gap-2 max-h-[200px] overflow-y-auto",children:Y.map(a=>{let c=J&&(0,B.isSameDay)(a,J),d=(0,B.isSameDay)(a,new Date);return(0,b.jsxs)("button",{type:"button",onClick:()=>{K(a),M(null)},className:`
                      p-2 rounded-lg text-sm transition-all
                      ${c?"bg-primary text-primary-foreground font-semibold":"bg-muted hover:bg-muted/80 text-foreground"}
                      ${d&&!c?"ring-2 ring-primary/50":""}
                    `,children:[(0,b.jsx)("div",{className:"text-xs opacity-70",children:(0,w.format)(a,"EEE")}),(0,b.jsx)("div",{className:"font-medium",children:(0,w.format)(a,"d")})]},a.toISOString())})})]}),J&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"text-sm font-medium text-foreground mb-3 flex items-center gap-2",children:[(0,b.jsx)(p.Clock,{className:"h-4 w-4"}),"Select Time (",(0,w.format)(J,"MMM d, yyyy"),")"]}),V?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(s.Loader2,{className:"h-6 w-6 animate-spin text-primary"})}):0===T.length?(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)("p",{children:"No available slots for this date."}),(0,b.jsx)("p",{className:"text-sm mt-1",children:"Please select another date."})]}):(0,b.jsx)("div",{className:"grid grid-cols-4 gap-2 max-h-[200px] overflow-y-auto",children:T.map(a=>{let c=L===a;return(0,b.jsxs)("button",{type:"button",onClick:()=>M(a),className:`
                          p-3 rounded-lg text-sm font-medium transition-all
                          ${c?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80 text-foreground"}
                        `,children:[c&&(0,b.jsx)(t.Check,{className:"h-4 w-4 inline-block mr-1"}),a]},a)})})]}),J&&L&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-foreground mb-3",children:"Payment Method"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)(e.Button,{type:"button",variant:"STRIPE"===P?"default":"outline",onClick:()=>Q("STRIPE"),className:"h-auto py-4 flex flex-col items-center gap-2",children:[(0,b.jsx)(v.CreditCard,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"Card Payment"})]}),(0,b.jsxs)(e.Button,{type:"button",variant:"CREDITS"===P?"default":"outline",onClick:()=>Q("CREDITS"),className:"h-auto py-4 flex flex-col items-center gap-2",disabled:!F||F.balance<h.price,children:[(0,b.jsx)(u.Coins,{className:"h-5 w-5"}),(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("span",{children:"Credits"}),F&&(0,b.jsxs)("span",{className:"text-xs opacity-70",children:[F.balance," available"]})]})]})]}),"CREDITS"===P&&F&&F.balance<h.price&&(0,b.jsxs)("p",{className:"text-sm text-destructive mt-2",children:["Insufficient credits. You need ",h.price," credits but have ",F.balance,"."]})]}),J&&L&&(0,b.jsx)(f.Card,{className:"border-primary/30 bg-primary/5",children:(0,b.jsxs)(f.CardContent,{className:"pt-6",children:[(0,b.jsx)("h4",{className:"font-semibold text-foreground mb-3",children:"Booking Summary"}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Service:"}),(0,b.jsx)("span",{className:"font-medium text-foreground",children:h.name})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Date:"}),(0,b.jsx)("span",{className:"font-medium text-foreground",children:(0,w.format)(J,"EEEE, MMM d, yyyy")})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Time:"}),(0,b.jsx)("span",{className:"font-medium text-foreground",children:L})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Type:"}),(0,b.jsx)("span",{className:"font-medium text-foreground",children:"ONLINE"===N?"Online":"In-Person"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Payment:"}),(0,b.jsx)("span",{className:"font-medium text-foreground",children:"CREDITS"===P?"Credits":"Card"})]}),(0,b.jsxs)("div",{className:"flex justify-between pt-2 border-t border-border/50",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Total:"}),(0,b.jsx)("span",{className:"font-bold text-primary text-lg",children:"CREDITS"===P?(0,b.jsxs)("span",{children:[h.price," Credits"]}):(0,b.jsxs)("span",{children:["£",h.price]})})]})]})]})}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>g(!1),className:"flex-1",disabled:R,children:"Cancel"}),(0,b.jsx)(e.Button,{onClick:X,disabled:!J||!L||R||"CREDITS"===P&&(!F||F.balance<h.price),className:"flex-1 bg-primary text-primary-foreground hover:bg-primary/90",children:R?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Booking..."]}):"CREDITS"===P?"Book with Credits":"Confirm Booking"})]})]})]})}):null}let E=(0,a.i(7909).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);function F(){let a=(0,d.useSearchParams)(),{services:k,isLoading:m,error:n,fetchServices:o}=(0,l.useBookings)(),[s,t]=(0,c.useState)("all"),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!1);(0,c.useEffect)(()=>{o()},[o]),(0,c.useEffect)(()=>{let b="true"===a.get("book"),c=a.get("serviceId");if(b&&k.length>0&&!w)if(c){let a=k.find(a=>a.id===c);a&&(v(a),x(!0))}else v(k[0]),x(!0)},[a,k,w]);let y=k.filter(a=>!0);return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(g.Navigation,{}),(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)(h.DashboardSidebar,{}),(0,b.jsxs)("main",{className:"flex-1 lg:ml-64",children:[(0,b.jsxs)("section",{className:"relative overflow-hidden py-16 md:py-24",children:[(0,b.jsx)(j.MysticalSparkles,{}),(0,b.jsx)("div",{className:"container mx-auto px-4 relative z-10",children:(0,b.jsxs)("div",{className:"max-w-3xl mx-auto text-center space-y-4",children:[(0,b.jsx)("h1",{className:"text-4xl md:text-6xl font-bold text-foreground text-balance",children:"Book Your Session, Pal"}),(0,b.jsx)("p",{className:"text-xl text-muted-foreground text-pretty",children:"Choose in-person or online — whatever suits yer vibes."})]})})]}),(0,b.jsx)("section",{className:"py-8 border-b border-border/50",children:(0,b.jsx)("div",{className:"container mx-auto px-4",children:(0,b.jsxs)("div",{className:"flex flex-wrap justify-center gap-4",children:[(0,b.jsx)(e.Button,{variant:"all"===s?"default":"outline",onClick:()=>t("all"),className:"all"===s?"bg-primary text-primary-foreground":"border-primary/50 hover:bg-primary/10",children:"All Services"}),(0,b.jsxs)(e.Button,{variant:"online"===s?"default":"outline",onClick:()=>t("online"),className:"online"===s?"bg-primary text-primary-foreground":"border-primary/50 hover:bg-primary/10",children:[(0,b.jsx)(q.Video,{className:"h-4 w-4 mr-2"}),"Online Readings"]}),(0,b.jsxs)(e.Button,{variant:"in-person"===s?"default":"outline",onClick:()=>t("in-person"),className:"in-person"===s?"bg-primary text-primary-foreground":"border-primary/50 hover:bg-primary/10",children:[(0,b.jsx)(r.MapPin,{className:"h-4 w-4 mr-2"}),"In-Person Readings"]})]})})}),(0,b.jsx)("section",{className:"py-16",children:(0,b.jsx)("div",{className:"container mx-auto px-4",children:m?(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading services..."})]})}):n?(0,b.jsxs)("div",{className:"text-center py-20",children:[(0,b.jsx)("p",{className:"text-destructive mb-4",children:n}),(0,b.jsx)(e.Button,{onClick:()=>o(),children:"Try Again"})]}):0===y.length?(0,b.jsx)("div",{className:"text-center py-20",children:(0,b.jsxs)("div",{className:"max-w-md mx-auto space-y-4",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-lg",children:"No services available at the moment."}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"We're working on adding more services. Check back soon or contact us for special requests."})]})}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:y.map(a=>(0,b.jsxs)(f.Card,{className:"border-border/50 hover:border-primary/50 transition-all duration-300 hover:shadow-lg hover:shadow-primary/20 relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-24 h-24 bg-linear-to-br from-primary/20 to-accent/20 blur-2xl"}),(0,b.jsxs)(f.CardHeader,{className:"relative",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsx)(f.CardTitle,{className:"text-foreground text-xl",children:a.name}),(0,b.jsx)(q.Video,{className:"h-5 w-5 text-primary shrink-0"})]}),a.description&&(0,b.jsx)(f.CardDescription,{className:"text-muted-foreground leading-relaxed",children:a.description})]}),(0,b.jsx)(f.CardContent,{className:"relative",children:(0,b.jsxs)("div",{className:"space-y-3",children:[a.duration&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(p.Clock,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:[a.duration," minutes"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-border/50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(E,{className:"h-5 w-5 text-primary"}),(0,b.jsxs)("span",{className:"text-2xl font-bold text-foreground",children:["£",a.price]})]}),(0,b.jsx)(e.Button,{size:"sm",className:"bg-primary text-primary-foreground hover:bg-primary/90",onClick:()=>{v(a),x(!0)},children:"Book Now"})]})]})})]},a.id))})})})]})]}),(0,b.jsx)(i.MobileBottomNav,{}),(0,b.jsx)(D,{open:w,onOpenChange:x,service:u})]})}a.s(["default",()=>F],94440)}];

//# sourceMappingURL=My%20Projects_mystic-john_components_BookingsClient_tsx_9cf0a724._.js.map