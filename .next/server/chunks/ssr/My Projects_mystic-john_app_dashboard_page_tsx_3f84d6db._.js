module.exports=[34132,a=>{"use strict";var b=a.i(13691),c=a.i(15916),d=a.i(87637),e=a.i(9309);a.i(59693);var f=a.i(92002),g=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,d)=>{let e=(0,f.createSlot)(`Primitive.${d}`),g=c.forwardRef((a,c)=>{let{asChild:f,...g}=a;return(0,b.jsx)(f?e:d,{...g,ref:c})});return g.displayName=`Primitive.${d}`,{...a,[d]:g}},{}),h="Progress",[i,j]=function(a,d=[]){let e=[],f=()=>{let b=e.map(a=>c.createContext(a));return function(d){let e=d?.[a]||b;return c.useMemo(()=>({[`__scope${a}`]:{...d,[a]:e}}),[d,e])}};return f.scopeName=a,[function(d,f){let g=c.createContext(f);g.displayName=d+"Context";let h=e.length;e=[...e,f];let i=d=>{let{scope:e,children:f,...i}=d,j=e?.[a]?.[h]||g,k=c.useMemo(()=>i,Object.values(i));return(0,b.jsx)(j.Provider,{value:k,children:f})};return i.displayName=d+"Provider",[i,function(b,e){let i=e?.[a]?.[h]||g,j=c.useContext(i);if(j)return j;if(void 0!==f)return f;throw Error(`\`${b}\` must be used within \`${d}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let d=()=>{let d=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let e=d.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return c.useMemo(()=>({[`__scope${b.scopeName}`]:e}),[e])}};return d.scopeName=b.scopeName,d}(f,...d)]}(h),[k,l]=i(h),m=c.forwardRef((a,c)=>{var d,e;let{__scopeProgress:f,value:h=null,max:i,getValueLabel:j=p,...l}=a;(i||0===i)&&!s(i)&&console.error((d=`${i}`,`Invalid prop \`max\` of value \`${d}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let m=s(i)?i:100;null===h||t(h,m)||console.error((e=`${h}`,`Invalid prop \`value\` of value \`${e}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let n=t(h,m)?h:null,o=r(n)?j(n,m):void 0;return(0,b.jsx)(k,{scope:f,value:n,max:m,children:(0,b.jsx)(g.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":r(n)?n:void 0,"aria-valuetext":o,role:"progressbar","data-state":q(n,m),"data-value":n??void 0,"data-max":m,...l,ref:c})})});m.displayName=h;var n="ProgressIndicator",o=c.forwardRef((a,c)=>{let{__scopeProgress:d,...e}=a,f=l(n,d);return(0,b.jsx)(g.div,{"data-state":q(f.value,f.max),"data-value":f.value??void 0,"data-max":f.max,...e,ref:c})});function p(a,b){return`${Math.round(a/b*100)}%`}function q(a,b){return null==a?"indeterminate":a===b?"complete":"loading"}function r(a){return"number"==typeof a}function s(a){return r(a)&&!isNaN(a)&&a>0}function t(a,b){return r(a)&&!isNaN(a)&&a<=b&&a>=0}o.displayName=n;var u=a.i(56610);function v({className:a,value:c,...d}){return(0,b.jsx)(m,{"data-slot":"progress",className:(0,u.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",a),...d,children:(0,b.jsx)(o,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(c||0)}%)`}})})}var w=a.i(30194),x=a.i(48848),y=a.i(29513),z=a.i(4750),A=a.i(50519),B=a.i(7298);a.i(42680);var C=a.i(19556),D=a.i(66798),E=a.i(45243),F=a.i(22942),G=a.i(24416),H=a.i(7909);let I=(0,H.default)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);var J=a.i(10083),K=a.i(30821),L=a.i(937),M=a.i(94),N=a.i(3171);let O=(0,H.default)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);var P=a.i(3320),Q=a.i(92861),R=a.i(4423),S=a.i(97295),T=a.i(8228);function U(){let{user:a}=(0,B.useAuthContext)(),{bookings:f,fetchBookings:g,isLoading:h}=(0,C.useBookings)(),{enrollments:i,fetchEnrollments:j,isLoading:k}=(0,D.useCourses)(),{balance:l,fetchBalance:m,isLoading:n}=(0,E.useCredits)(),[o,p]=(0,c.useState)(!1);(0,c.useEffect)(()=>{g(),j(),m()},[g,j,m]);let q=f.filter(a=>{try{var b;return b=(0,R.parseISO)(a.startDateTime),+(0,S.toDate)(b)>Date.now()}catch{return!1}}).sort((a,b)=>{try{return(0,R.parseISO)(a.startDateTime).getTime()-(0,R.parseISO)(b.startDateTime).getTime()}catch{return 0}})[0],r=a=>{try{return(0,Q.format)((0,R.parseISO)(a),"EEEE, MMM d, yyyy")}catch{return a}};return(0,b.jsxs)(A.ProtectedRoute,{children:[(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(w.Navigation,{}),(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)(x.DashboardSidebar,{}),(0,b.jsxs)("main",{className:"flex-1 p-6 lg:p-8 lg:ml-64 pb-20 lg:pb-6",children:[(0,b.jsxs)("div",{className:"mb-8 relative",children:[(0,b.jsx)("div",{className:"absolute -top-4 -left-4 w-32 h-32 bg-primary/20 blur-3xl rounded-full"}),(0,b.jsxs)("div",{className:"relative z-10",children:[(0,b.jsxs)("h1",{className:"text-3xl md:text-4xl font-bold text-foreground mb-2",children:["Welcome Back, ",a?.name||"Lovely Soul"]}),(0,b.jsx)("p",{className:"text-muted-foreground text-lg",children:"Here's what's happening in yer wee universe today."})]})]}),h||k||n?(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading yer dashboard..."})]})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[(0,b.jsxs)(e.Card,{className:"border-primary/50 relative overflow-hidden shadow-lg shadow-primary/10",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-linear-to-br from-primary/10 to-transparent"}),(0,b.jsx)(z.MysticalSparkles,{}),(0,b.jsxs)(e.CardHeader,{className:"relative z-10",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(e.CardTitle,{className:"text-foreground",children:"Credit Balance"}),(0,b.jsx)(J.Coins,{className:"h-5 w-5 text-primary"})]}),(0,b.jsx)(e.CardDescription,{className:"text-muted-foreground",children:"Available for quick replies"})]}),(0,b.jsx)(e.CardContent,{className:"relative z-10",children:(0,b.jsxs)("div",{className:"flex items-end justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-4xl font-bold text-primary mb-2",children:l?.balance??0}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Credits remaining"})]}),(0,b.jsxs)(d.Button,{size:"sm",className:"bg-primary text-primary-foreground hover:bg-primary/90",onClick:()=>p(!0),children:[(0,b.jsx)(K.Plus,{className:"h-4 w-4 mr-1"}),"Buy More"]})]})})]}),(0,b.jsxs)(e.Card,{className:"border-border/50 hover:border-accent/50 transition-colors",children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(e.CardTitle,{className:"text-foreground",children:"Next Appointment"}),(0,b.jsx)(F.Calendar,{className:"h-5 w-5 text-accent"})]}),(0,b.jsx)(e.CardDescription,{className:"text-muted-foreground",children:q?.service?.name||"No upcoming appointments"})]}),(0,b.jsx)(e.CardContent,{children:q?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(L.Clock,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:[r(q.startDateTime)," at ",(a=>{try{return(0,Q.format)((0,R.parseISO)(a),"h:mm a")}catch{return""}})(q.startDateTime)]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:"ONLINE"===q.type?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(O,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Online"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(M.MapPin,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"In Person"})]})}),(0,b.jsx)(d.Button,{size:"sm",variant:"outline",className:"w-full mt-2 border-accent/50 hover:bg-accent/10",asChild:!0,children:(0,b.jsx)(P.default,{href:"/bookings",children:"View Details"})})]}):(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No upcoming appointments"}),(0,b.jsx)(d.Button,{size:"sm",variant:"outline",className:"w-full mt-2 border-accent/50 hover:bg-accent/10",asChild:!0,children:(0,b.jsx)(P.default,{href:"/bookings",children:"Book a Reading"})})]})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)(e.Card,{className:"lg:col-span-2 border-border/50",children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(e.CardTitle,{className:"text-foreground",children:"Courses in Progress"}),(0,b.jsx)(G.BookOpen,{className:"h-5 w-5 text-primary"})]}),(0,b.jsx)(e.CardDescription,{className:"text-muted-foreground",children:"Keep learning, lovely soul"})]}),(0,b.jsx)(e.CardContent,{className:"space-y-6",children:i&&i.length>0?i.slice(0,2).map(a=>{let c=(a=>{if(!a.course?.steps||0===a.course.steps.length)return 0;let b=a.course.steps.length;return Math.round(!!a.progress/b*100)})(a),e=a.course?.steps?.length||0,f=Math.round(c/100*e);return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-foreground",children:a.course?.title||"Course"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[f," of ",e," lessons completed"]})]}),(0,b.jsx)(d.Button,{size:"sm",className:"bg-primary text-primary-foreground hover:bg-primary/90",asChild:!0,children:(0,b.jsxs)(P.default,{href:`/courses/${a.courseId}`,children:[(0,b.jsx)(N.Play,{className:"h-4 w-4 mr-1"}),"Continue"]})})]}),(0,b.jsx)(v,{value:c,className:"h-2"})]},a.id)}):(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"No courses enrolled yet"}),(0,b.jsx)(d.Button,{variant:"outline",className:"border-primary/50 hover:bg-primary/10",asChild:!0,children:(0,b.jsx)(P.default,{href:"/courses",children:"Browse Courses"})})]})})]}),(0,b.jsxs)(e.Card,{className:"border-border/50",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(e.CardTitle,{className:"text-foreground",children:"Notifications"}),(0,b.jsx)(I,{className:"h-5 w-5 text-accent"})]})}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary mt-2 shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-foreground",children:"Welcome to John Spratt Psychic Medium!"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Just now"})]})]}),q&&(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-accent mt-2 shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm text-foreground",children:["Upcoming: ",q.service?.name]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:q.startDateTime?r(q.startDateTime):""})]})]}),i&&i.length>0&&(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-muted mt-2 shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-foreground",children:"Continue yer courses"}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["You have ",i.length," course",1!==i.length?"s":""," in progress"]})]})]})]})]})]}),(0,b.jsxs)("div",{className:"mt-8",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Quick Actions"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,b.jsx)(d.Button,{variant:"outline",className:"h-auto py-4 flex flex-col gap-2 border-primary/50 hover:bg-primary/10",asChild:!0,children:(0,b.jsxs)(P.default,{href:"/bookings",children:[(0,b.jsx)(F.Calendar,{className:"h-6 w-6 text-primary"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Book a Reading"})]})}),(0,b.jsx)(d.Button,{variant:"outline",className:"h-auto py-4 flex flex-col gap-2 border-primary/50 hover:bg-primary/10",asChild:!0,children:(0,b.jsxs)(P.default,{href:"/courses",children:[(0,b.jsx)(G.BookOpen,{className:"h-6 w-6 text-primary"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Continue Course"})]})}),(0,b.jsx)(d.Button,{variant:"outline",className:"h-auto py-4 flex flex-col gap-2 border-accent/50 hover:bg-accent/10",asChild:!0,children:(0,b.jsxs)(P.default,{href:"/dashboard",children:[(0,b.jsx)(J.Coins,{className:"h-6 w-6 text-accent"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Spend a Credit"})]})})]})]})]})]})]}),(0,b.jsx)(y.MobileBottomNav,{})]}),(0,b.jsx)(T.BuyCreditsDialog,{open:o,onOpenChange:p})]})}a.s(["default",()=>U],34132)}];

//# sourceMappingURL=My%20Projects_mystic-john_app_dashboard_page_tsx_3f84d6db._.js.map